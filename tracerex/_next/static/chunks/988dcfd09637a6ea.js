(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75609,73151,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=async e=>{let t=await e.text();try{let e=JSON.parse(t);if(Array.isArray(e))return e;if(e.traceEvents)return e.traceEvents;throw Error("Invalid trace format")}catch(e){throw console.error("Failed to parse trace file",e),e}},l=e=>{let t=new Map;return e.forEach(e=>{let r=`${e.pid}:${e.tid}`;t.has(r)||t.set(r,{pid:e.pid,tid:e.tid,events:[],minTs:1/0,maxTs:-1/0});let s=t.get(r);s.events.push(e),e.ts<s.minTs&&(s.minTs=e.ts);let l="X"===e.ph?e.ts+(e.dur||0):e.ts;l>s.maxTs&&(s.maxTs=l)}),t.forEach(e=>{e.events.sort((e,t)=>e.ts-t.ts)}),Array.from(t.values())};e.s(["groupEventsByTrack",0,l,"parseTraceFile",0,s],73151);let a=(0,r.createContext)(void 0);e.s(["TraceProvider",0,({children:e})=>{let[s,i]=(0,r.useState)([]),[c,n]=(0,r.useState)([]),[d,o]=(0,r.useState)(null),[x,h]=(0,r.useState)(null);return(0,t.jsx)(a.Provider,{value:{events:s,tracks:c,setTraceData:e=>{i(e),n(l(e))},fileName:d,setFileName:o,selectedEvent:x,setSelectedEvent:h},children:e})},"useTrace",0,()=>{let e=(0,r.useContext)(a);if(!e)throw Error("useTrace must be used within a TraceProvider");return e}],75609)},25805,e=>{"use strict";var t=e.i(43476),r=e.i(75609),s=e.i(71645),l=e.i(73151);function a(){let{setTraceData:e,setFileName:a}=(0,r.useTrace)(),[i,c]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!1),[o,x]=(0,s.useState)(null),h=async t=>{d(!0),x(null);try{let r=await (0,l.parseTraceFile)(t);e(r),a(t.name)}catch(e){x("Failed to parse file. Please ensure it is a valid Chrome Trace JSON."),console.error(e)}finally{d(!1)}},f=(0,s.useCallback)(e=>{e.preventDefault(),c(!1);let t=e.dataTransfer.files[0];t&&h(t)},[]),u=(0,s.useCallback)(e=>{e.preventDefault(),c(!0)},[]),m=(0,s.useCallback)(e=>{e.preventDefault(),c(!1)},[]);return(0,t.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-10 text-center transition-colors
        ${i?"border-primary bg-primary/10":"border-gray-600 hover:border-gray-500"}
        ${n?"opacity-50 cursor-wait":"cursor-pointer"}
      `,onDrop:f,onDragOver:u,onDragLeave:m,children:[(0,t.jsx)("input",{type:"file",accept:".json",className:"hidden",id:"trace-upload",onChange:e=>{let t=e.target.files?.[0];t&&h(t)},disabled:n}),(0,t.jsx)("label",{htmlFor:"trace-upload",className:"cursor-pointer block",children:n?(0,t.jsx)("p",{className:"text-xl",children:"Processing Trace..."}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xl font-medium",children:"Drop Trace File Here"}),(0,t.jsx)("p",{className:"text-gray-400",children:"or click to browse"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Accepts .json (Chrome Trace Format)"})]})}),o&&(0,t.jsx)("p",{className:"text-red-400 mt-4 font-bold",children:o})]})}let i=["#4285F4","#EA4335","#FBBC05","#34A853","#8AB4F8","#F28B82"];function c(){let{tracks:e,selectedEvent:l,setSelectedEvent:a,events:c}=(0,r.useTrace)(),n=(0,s.useRef)(null),d=(0,s.useRef)(null),[o,x]=(0,s.useState)({offset:0,scale:.1}),[h,f]=(0,s.useState)({width:0,height:0}),{globalMin:u,globalMax:m}=(0,s.useMemo)(()=>{if(0===e.length)return{globalMin:0,globalMax:1e3};let t=1/0,r=-1/0;return e.forEach(e=>{e.minTs<t&&(t=e.minTs),e.maxTs>r&&(r=e.maxTs)}),{globalMin:t,globalMax:r}},[e]);return(0,s.useEffect)(()=>{if(u!==1/0&&d.current){let e=d.current.clientWidth,t=m-u;x({offset:u-.05*t,scale:e/(1.1*t)})}},[u,m]),(0,s.useEffect)(()=>{if(!d.current)return;let e=new ResizeObserver(e=>{for(let t of e)f({width:t.contentRect.width,height:t.contentRect.height})});return e.observe(d.current),()=>e.disconnect()},[]),(0,s.useEffect)(()=>{let t=n.current;if(!t||0===e.length)return;let r=t.getContext("2d");if(!r)return;let{width:s,height:a}=h,c=window.devicePixelRatio||1;t.width=s*c,t.height=Math.max(a,40*e.length+30)*c,r.scale(c,c),r.clearRect(0,0,s,t.height/c);let{offset:d,scale:x}=o,f=d+s/x;r.font="12px sans-serif",e.forEach((e,t)=>{let a=30+40*t;t%2==0&&(r.fillStyle="#1e1e1e",r.fillRect(0,a,s,40)),e.events.forEach((e,t)=>{let s=e.ts,c=e.dur||0;if(s+c<d||s>f)return;let n=(s-d)*x,o=c*x;o<1&&(o=1),r.fillStyle=i[t%i.length],l===e&&(r.fillStyle="#ffffff");let h=a+4;r.fillRect(n,h,o,32),o>20&&(r.fillStyle="#fff",r.save(),r.beginPath(),r.rect(n,h,o,32),r.clip(),r.fillText(e.name,n+2,h+21.333333333333332),r.restore())}),r.fillStyle="rgba(0, 0, 0, 0.5)",r.fillRect(0,a,150,40),r.fillStyle="#ccc",r.fillText(`PID: ${e.pid} TID: ${e.tid}`,5,a+40/1.5)})},[e,o,h,l]),(0,t.jsxs)("div",{ref:d,className:"w-full h-full overflow-auto bg-black relative",onWheel:e=>{(e.ctrlKey||e.metaKey)&&e.preventDefault();let{offset:t,scale:r}=o;if(e.ctrlKey||e.metaKey){let s=e.deltaY>0?.9090909090909091:1.1,l=e.nativeEvent.offsetX,a=r*s;x({offset:t+l/r-l/a,scale:a})}else x({...o,offset:t+e.deltaY/r})},children:[(0,t.jsx)("canvas",{ref:n,onClick:t=>{let r=n.current?.getBoundingClientRect();if(!r)return;let s=t.clientX-r.left;t.clientY,r.top;let l=Math.floor((t.nativeEvent.offsetY-30)/40);if(l>=0&&l<e.length){let t=e[l],r=o.offset+s/o.scale,i=null;for(let e=t.events.length-1;e>=0;e--){let s=t.events[e],l=s.ts,a=s.ts+(s.dur||0);if(r>=l&&r<=a){i=s;break}}i?a(i):a(null)}},className:"cursor-crosshair block",style:{width:h.width,height:Math.max(h.height,40*e.length+30)}}),0===e.length&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No trace loaded"})})]})}function n(){let{selectedEvent:e}=(0,r.useTrace)();return e?(0,t.jsxs)("div",{className:"h-full bg-gray-900 border-l border-gray-800 p-4 overflow-auto font-mono text-sm",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-200 mb-4 border-b border-gray-700 pb-2",children:"Event Details"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Name"}),(0,t.jsx)("div",{className:"text-emerald-400 font-medium break-all",children:e.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Category"}),(0,t.jsx)("div",{className:"text-blue-400",children:e.cat})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Phase"}),(0,t.jsx)("div",{className:"text-gray-300",children:e.ph})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Timestamp"}),(0,t.jsxs)("div",{className:"text-gray-300",children:[e.ts," µs"]})]}),void 0!==e.dur&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Duration"}),(0,t.jsxs)("div",{className:"text-yellow-400",children:[e.dur," µs"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"PID / TID"}),(0,t.jsxs)("div",{className:"text-gray-400",children:[e.pid," / ",e.tid]})]}),e.args&&Object.keys(e.args).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-500 text-xs uppercase mb-1",children:"Args"}),(0,t.jsx)("pre",{className:"bg-gray-950 p-2 rounded text-xs text-gray-300 overflow-x-auto border border-gray-800",children:JSON.stringify(e.args,null,2)})]})]})]}):(0,t.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500 bg-gray-900 border-l border-gray-800 p-4",children:(0,t.jsx)("p",{children:"Select an event to view details"})})}function d(){let{fileName:e,events:s}=(0,r.useTrace)();return e&&0!==s.length?(0,t.jsxs)("div",{className:"flex flex-col h-screen bg-gray-950 text-white overflow-hidden",children:[(0,t.jsxs)("header",{className:"h-12 bg-gray-900 border-b border-gray-800 flex items-center px-4 justify-between shrink-0",children:[(0,t.jsxs)("div",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-blue-400",children:"Tracerex"}),(0,t.jsx)("span",{className:"text-gray-600",children:"/"}),(0,t.jsx)("span",{className:"text-gray-300 text-sm truncate max-w-md",title:e,children:e})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[s.length.toLocaleString()," events"]})]}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsx)(c,{})}),(0,t.jsx)("div",{className:"w-80 shrink-0 border-l border-gray-800",children:(0,t.jsx)(n,{})})]})]}):(0,t.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-24 bg-gray-950 text-white",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400",children:"Tracerex"}),(0,t.jsx)(a,{})]})}e.s(["default",()=>d],25805)}]);